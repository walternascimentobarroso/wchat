<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Chatterbot</title>
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css">
        <!-- Bootstrap core CSS -->
        <link href="/css/bootstrap.min.css" rel="stylesheet">
        <!-- Material Design Bootstrap -->
        <link href="/css/mdb.min.css" rel="stylesheet">
        <!-- Template styles -->
        <link href="/css/style.css" rel="stylesheet">
        <!-- Chat styles -->
        <link href="/css/chat.css" rel="stylesheet">
    </head>
    <body>
        <header>
            <!--Navbar-->
            <nav class="navbar navbar-dark primary-color-dark">
                <!-- Collapse button-->
                <button class="navbar-toggler hidden-sm-up" type="button" data-toggle="collapse" data-target="#collapseEx">
                    <i class="fa fa-bars"></i>
                </button>
                <div class="container">
                    <!--Collapse content-->
                    <div class="collapse navbar-toggleable-xs" id="collapseEx">
                        <!--Navbar Brand-->
                        <a class="navbar-brand" href="/index.html" >CHATERBOT</a>
                        <!--Links-->
                        <ul class="nav navbar-nav">
                            <li class="nav-item active">
                                <a class="nav-link" href="/index.html">Inicio <span class="sr-only">(current)</span></a>
                            </li>
                        </ul>
                    </div>
                    <!--/.Collapse content-->
                </div>
            </nav>
            <!--/.Navbar-->
        </header>
        <main>
            <!--Main layout-->
            <div class="container">
                <div class="row">
                    <div class="col-md-12">
                        <h1 class="h1-responsive">ChatterBot
                            <small class="text-muted">Chat</small>
                        </h1>
                    </div>
                </div>
                <div class="chat" style="height: auto; margin-top: 100px; margin-bottom: 50px;">
                    <!--<div class="chat" >-->
                    <div class="messages" style="height: 80%; overflow-y: scroll;">
                        <div class="message">
                            <!--                            <div class="bot">Olá?</div>-->
                        </div>
                    </div>
                    <div class="input">
                        <form action="#" id="chat" method="post">
                            <input class="text" contenteditable="<%= true %>" id="mensagem" placeholder="Escreva sua mensagem aqui..."></input>
                        </form>
                    </div>
                </div>
                <button class="btn btn-success btn-lg" id="speakBtn">Falar</button>
            </div>
        </main>

        <!-- SCRIPTS -->
        <script>
            window.addEventListener('DOMContentLoaded', function () {
                var inputMsg = document.querySelector('#mensagem');
                var speakBtn = document.querySelector('#speakBtn');

                // testa se o navegador suporta o reconhecimento de voz
                if (window.SpeechRecognition || window.webkitSpeechRecognition) {

                    // captura a voz
                    var SpeechRecognition = SpeechRecognition || webkitSpeechRecognition;

                    var recognition = new SpeechRecognition();

                    // inicia reconhecimento
                    speakBtn.addEventListener('click', function (e) {
                        recognition.start();
                    }, false);

                    // resultado do reconhecimento
                    recognition.addEventListener('result', function (e) {
                        var result = e.results[0][0].transcript;
                        //console.log(result);
                        inputMsg.value = result;
                        if (result.toLowerCase() === 'luz') {
                            document.body.classList.toggle('luz-apagada');
                        }
                        // window.location.href = 'http://' + result;
                    }, false);
                } else {
                    alert('Este navegador não suporta esta funcionalidade ainda!');
                }

            }, false);
        </script>
        <!-- JQuery -->
        <script type="text/javascript" src="/js/jquery-2.2.3.min.js"></script>
        <!-- Bootstrap tooltips -->
        <script type="text/javascript" src="/js/tether.min.js"></script>
        <!-- Bootstrap core JavaScript -->
        <script type="text/javascript" src="/js/bootstrap.min.js"></script>
        <!-- MDB core JavaScript -->
        <script type="text/javascript" src="/js/mdb.min.js"></script>
        <!-- Chat JavaScript -->
        <script type="text/javascript" src="/js/chat.js"></script>
    </body>
</html>